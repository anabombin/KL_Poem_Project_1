!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Sli",[],t):"object"==typeof exports?exports.Sli=t():e.Sli=t()}(this,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>r});class r{constructor(e,t){this.appName=e,this.tier=t,this.apiUrl=`https://sli-external.${this.tier}.sothelabs.com/v1/indicator`,this.dryrun=!["dev","staging","prod"].includes(this.tier),this.timers={}}send(e,{state:t,durationMs:r}={}){if(""===e)return void console.error("`sliName` cannot be blank");if(!t&&!r)return void console.error("One of `state` or `durationMs` in the payload is required");if(t&&!["good","bad"].includes(t))return void console.error("`state` must be one of ['good', 'bad']");const i=JSON.stringify({app_name:this.appName,sli_name:e,state:t,duration_ms:r});!0!==this.dryrun?fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:i}).catch((e=>{console.error("SLI error:",e)})):console.log("SLI DRY RUN - POST",this.apiUrl,i)}startTimer(e,t=864e5){""!==e?t<=0?console.error("`TTL` should be greater than 0"):this.timers[e]?console.error(`There is already a timer running for '${e}'`):this.timers[e]={startTime:(new Date).getTime(),timer:setTimeout((()=>{this.endTimer(e,"bad")}),t)}:console.error("`sliName` cannot be blank")}endTimer(e,t){if(!this.timers[e])return void console.error(`No timer running with timer name '${e}'`);clearTimeout(this.timers[e].timer);const r=this.timers[e].startTime,i=(new Date).getTime();this.send(e,{state:t,durationMs:i-r}),delete this.timers[e]}}return t.default})()));